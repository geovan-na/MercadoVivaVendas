package br.com.mercadojava.servico;

import java.util.Scanner;
import br.com.mercadojava.modelo.Produto;

public class GerenciadorDeEstoque {
    private Produto produto1;
    private Produto produto2;
    private Produto produto3;
    private Scanner scanner;
    private int quantidadeProdutos;

    public GerenciadorDeEstoque() {
        scanner = new Scanner(System.in);
        quantidadeProdutos = 0;
    }

    public void iniciar() {
        int opcao;
        do {
            System.out.println("\n=== SISTEMA DE GESTÃO DE ESTOQUE ===");
            System.out.println("1. Cadastrar produto");
            System.out.println("2. Listar produtos");
            System.out.println("3. Buscar produto por ID");
            System.out.println("4. Sair");
            System.out.print("Escolha uma opção: ");
            
            opcao = scanner.nextInt();
            scanner.nextLine(); // Limpar o buffer
            
            if (opcao == 1) {
                cadastrarProduto();
            } else if (opcao == 2) {
                listarProdutos();
            } else if (opcao == 3) {
                buscarProdutoPorId();
            } else if (opcao == 4) {
                System.out.println("Saindo do sistema...");
            } else {
                System.out.println("Opção inválida! Tente novamente.");
            }
        } while (opcao != 4);
    }

    private void cadastrarProduto() {
        if (quantidadeProdutos >= 3) {
            System.out.println("Limite máximo de 3 produtos atingido!");
            return;
        }

        System.out.println("\n--- CADASTRAR PRODUTO ---");
        System.out.print("ID do produto: ");
        int id = scanner.nextInt();
        scanner.nextLine();

        System.out.print("Nome do produto: ");
        String nome = scanner.nextLine();

        System.out.print("Preço do produto: ");
        double preco = scanner.nextDouble();
        scanner.nextLine();

        Produto novoProduto = new Produto(id, nome, preco);

        if (quantidadeProdutos == 0) {
            produto1 = novoProduto;
        } else if (quantidadeProdutos == 1) {
            produto2 = novoProduto;
        } else {
            produto3 = novoProduto;
        }

        quantidadeProdutos++;
        System.out.println("Produto cadastrado com sucesso!");
    }

    private void listarProdutos() {
        System.out.println("\n--- LISTA DE PRODUTOS ---");

        if (quantidadeProdutos == 0) {
            System.out.println("Nenhum produto cadastrado.");
            return;
        }

        if (produto1 != null) {
            System.out.println("ID: " + produto1.getIdProduto() +
                    " | Nome: " + produto1.getNomeProduto() +
                    " | Preço: R$ " + produto1.getPreco());
        }

        if (produto2 != null) {
            System.out.println("ID: " + produto2.getIdProduto() +
                    " | Nome: " + produto2.getNomeProduto() +
                    " | Preço: R$ " + produto2.getPreco());
        }

        if (produto3 != null) {
            System.out.println("ID: " + produto3.getIdProduto() +
                    " | Nome: " + produto3.getNomeProduto() +
                    " | Preço: R$ " + produto3.getPreco());
        }
    }

    private void buscarProdutoPorId() {
        System.out.println("\n--- BUSCAR PRODUTO POR ID ---");
        System.out.print("Digite o ID do produto: ");
        int id = scanner.nextInt();
        scanner.nextLine();

        if (produto1 != null && produto1.getIdProduto() == id) {
            exibirProduto(produto1);
        } else if (produto2 != null && produto2.getIdProduto() == id) {
            exibirProduto(produto2);
        } else if (produto3 != null && produto3.getIdProduto() == id) {
            exibirProduto(produto3);
        } else {
            System.out.println("Produto com ID " + id + " não encontrado.");
        }
    }

    private void exibirProduto(Produto produto) {
        System.out.println("Produto encontrado:");
        System.out.println("ID: " + produto.getIdProduto());
        System.out.println("Nome: " + produto.getNomeProduto());
        System.out.println("Preço: R$ " + produto.getPreco());
    }

    public static void main(String[] args) {
        GerenciadorDeEstoque gestao = new GerenciadorDeEstoque();
        gestao.iniciar();
    }
}
